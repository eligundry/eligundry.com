---
import clsx from 'clsx'
import EmojiText from '../components/EmojiText.astro'

const links = [
  {
    name: 'Home',
    href: '/',
    emoji: '🏠',
    emojiLabel: 'little house to denote the home page',
  },
  {
    name: 'Blog',
    href: '/blog/',
    emoji: '📝',
    emojiLabel: 'note to denote my blog',
  },
  {
    name: 'Feelings',
    href: '/feelings/',
    emoji: '🥺',
    emojiLabel: 'emotional looking emoji face to denote my feelings',
  },
  {
    name: 'Talks',
    href: '/talks/',
    emoji: '🗣',
    emojiLabel: 'silhouette of person speaking',
  },
  {
    name: 'Resume',
    href: '/resume/',
    emoji: '📄',
    emojiLabel: 'piece of paper representing my resume',
  },
]
---

<progress
  id="scroll-progress"
  aria-label="your scroll progress through the page"
  class={clsx(
    'progress',
    'progress-primary',
    'w-full',
    'm-0',
    'fixed',
    'top-0',
    'z-50',
    'rounded-none'
  )}
  value="0"
  max="100"></progress>
<header
  class={clsx([
    'navbar',
    'bg-base-100',
    'shadow',
    'fixed',
    'top-0',
    'z-40',
    'pr-8',
    'pl-14',
    'print-hidden',
    '[&_a]:hover:bg-transparent',
    '[&_a]:focus:bg-transparent',
    '[&_a]:hover:no-underline',
    '[&_a]:focus:no-underline',
  ])}
>
  <div class="container mx-auto flex flex-wrap">
    <div class="flex-1">
      <a
        href="/"
        itemprop="sameAs"
        class="btn btn-ghost normal-case text-xl site-name pl-0">Eli Gundry</a
      >
    </div>
    <nav class="flex-none hidden md:flex">
      <ul class={clsx('menu', 'menu-horizontal', 'p-0', '[&_a]:text-current')}>
        {
          links.map((link) => (
            <li>
              <a
                href={link.href}
                class={clsx('hover:link-primary', 'focus:link-primary')}
              >
                <EmojiText emoji={link.emoji} label={link.emojiLabel}>
                  {link.name}
                </EmojiText>
              </a>
            </li>
          ))
        }
        <li>
          <label class="swap swap-flip">
            <input type="checkbox" id="theme-toggle" />
            <div class="swap-on">🌚</div>
            <div class="swap-off">🌞</div>
          </label>
        </li>
      </ul>
    </nav>
    <div class="flex justify-end flex-none">
      <nav class="navbar-end md:hidden">
        <div class="dropdown dropdown-end">
          <label class="swap swap-flip btn btn-ghost btn-circle" tabindex="0">
            <div class="swap-on">🙅‍♂️</div>
            <div class="swap-off">🍔</div>
          </label>
          <ul
            tabindex="0"
            class="menu menu-compact dropdown-content bg-base-100 rounded-box w-full"
          >
          </ul>
        </div>
      </nav>
    </div>
  </div>
</header>

<script type="module">
  const progress = document.getElementById('scroll-progress')

  function animateProgress() {
    requestAnimationFrame(() => {
      progress.value = window.scrollY
      progress.max =
        Math.max(document.body.clientHeight, window.innerHeight + 1) -
        window.innerHeight
    })
  }

  document.addEventListener('DOMContentLoaded', animateProgress)
  document.addEventListener('scroll', animateProgress)
  document.addEventListener('resize', animateProgress)
</script>
