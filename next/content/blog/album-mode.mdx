---
title: Introducing Album Mode.party
description: I made an application to feed my music discovery addiction
slug: album-mode.party
date: 2022-05-28T04:00
---

# Outline

* I suffer from decision paralysis
  * Shout out @neilzo's lunch roulette thing from years ago
* [album-mode.party](https://album-mode.party)
  * I needed an app where I can push buttons and get an album to listen to
  * All this app does is, for a given search query, grab a random album from Spotify related to it.
    * If you don't like it, hit next, and it'll give you a new one
    * If you love it, confetti!
  * It started with searching by label and being able to get a random album from Pitchfork reviews
    * I ended up scraping minmal amounts of data on reviews into a sqlite database that I ship with the code
  * Had a "no, duh" moment about 2 weeks in about being able to search via genre and artist
    * Genre in Spotify is super interesting. They don't list it anywhere and I had to pull it from this random Spotify
      research site who's purpose I really don't understand, someone please explain it to me!
      * https://everynoise.com/everynoise1d.cgi?scope=all
    * Artist search is using Spotify's related artists API
  * Leveraging Github projects to organize my work on this, I'm so adult
  * Using every part of the Spotify API buffalo
  * Adding Spotify login to play a random album from your library is so helpful
  * This app covers similar ground as Spotify Uncharted, I guess
* What's next?
  * Advanced searching features
  * Better design
    * Tinder swiping?
    * Loose the bootstrap feel

# What?

Elevator pitch time!

I built an application that recommends me a random album to listen to. Since launching [album-mode.party][app], I have
discovered so many new albums that I wouldn't have otherwise heard. It's UI has buttons and inputs that I can press to
get new music very quickly.

# Why?

I listen to way too much music. I love to put on an album and listen to it from font to back. It's comforting, as that
is how my dad played music around the house. As I have gotten older, I've thought about it and have come to the
conclusion that there isn't a better way to understand an artist's vision than listening to a full album.

Quick history trip! I first started discovering new albums on [last.fm][last.fm] in 2008. I quickly outgrew them, as
their recommendations were not very good, though I still scrobble heavily. Then I moved on to borrowing CDs from the
library that I found good reviews of on [Pitchfork][p4k]. That worked out great during high school with an iPod. Then
the streaming age came and Spotify rocked my world. All the albums I could ever want to hear, right at my fingertips!?
Heaven, I tell you.

Spotify's Discover tab was a godsend. I think I first started using it heavily in 2015.  It was smart enough to look at
what I was listening to and recommend me stuff that was actually didn't know that I wanted. It was the ideal experience
for me.

But then, in the past year or two, Spotify's Discover tab fell off. All the recommendations just aren't what I'm in the
mood for. My tastes are changing and I want things that I don't know that I want. All it's recommendations are skewed by
me listening to ambient music as a I fall asleep and all the aggressive hip hop I listened to walking to work.

I needed to do something about this.

# How?

What I needed to make was an application that would recommend me a single album at a time and I could thumbs up or down
it to get the next album. I'm prone to decision paralysis, so presenting me binary choices with no consequences is an
important feature. To do this, I reflected on the two main patterns that I discover new music:

1. Spotify's recommendation engine
2. Highly rated albums from publications like [Pitchfork][p4k], [Bandcamp Daily][bandcamp.daily] and more

With a little bit of programming, I was able to make this a reality.

## Spotify Search

The initial feature I had in mind to find music on Spotify was to be able to get a random album by searching by music
label. See, I listen to a lot of emo albums and I was able find a lot of new music by searching by `label:"count your
lucky stars"`. So I went ahead a wired up this type of searching and started finding music.

I quickly ran into the limitations of this. It's great for searching for smaller labels with a focus on genre, but most
music worth listening to comes from major labels like Columbia or UMG. _You can_ search those labels, but you're going
to get a hodge podge of random albums.

I shared the app with some friends at that point and they were all like "...cool" and then I realized that few people
know labels! It's far easier to search by genres or artists!

### Spotify Genres

Searching Spotify by genre is weird! Rather than being flexible with genre names and doing a nearest neighbor, like they
do when you search by artist, they have a fixed list of genres. Even more unhelpfully, they don't provide a neat API
endpoint to pull all the genres (from what I can tell, could be wrong here). If you attempt to hit that API with a term
like "country and western", it will throw an error, so you must search by their defined genres.

Luckily, [Glenn McDonald](https://furia.com/) created a site called [Every Noise at Once][every-noise] that has a
[neat list of all 5889 genres that Spotify supports][every-noise.genres]. I was able to scrape that list, toss them in the
database and make the genre search input into an autocomplete dropdown pre-seeded with the top 100 to pick from.

> Glenn, if you ever read this, I would love to talk to you about Every Noise at Once. Clicking around in it produces
> some really interesting results, but I'm completely unclear what it's purpose is, especially to you.

### Related Spotify Artists

The cool thing about Spotify's web API is that any functionality you see in the application is powered by a publically
available API.

## Publications

I decided the easiest way to get random recommendations from publications would be to scrape review sites that I liked
and shove minimal amounts of data to pull the album from Spotify into a sqlite database.

It is super important to me honor the hard work these publications put into their reviews. As such, where possible,
I try to link to the original reviews when presenting the album.

<figure>
  ![Screenshot of Album Mode.party recommending Visitor by The Dodos with a link to the Pitchfork review](/img/album-mode/p4k-preview.png)
  <figcaption>Note the link to the Pitchfork review</figcaption>
</figure>


In the case of reviews from [Bandcamp Daily][bandcamp.daily], I went out of my way to embed the album on Bandcamp so
that the artist has a chance of getting a purchase from the app's recommendation.

<figure>
  ![Screenshot of Album Mode.party recommending a Camp Cope album with a Bandcamp embed](/img/album-mode/bandcamp-preview.png)
  <figcaption>Note the link to the Bandcamp Daily review and the specialized Bandcamp embed</figcaption>
</figure>

## Stack

### Remix

My new job has me working and thinking a lot about Jamstack frameworks and I was itching for an opportunity to play
around with [Remix][remix.run]. It's the new hotness in the React world and has some very novel concepts that end up
being perfect for [Album Mode.party][app].

* My new job at Chord is developer tooling on headless applications
* This app gave me an excuse to pick up Remix
* Reminds me a lot of PHP
  * Your layout code is right beneath your data code
  * File organization is like a refined first PHP project
  * Hosting was somehow simpler than FTPing PHP files, even though there is a build step!
  * Really nice integration with Netlify

### Prisma

* First time using it
* Using it to pull reviews from various sources and Spotify genre lookups
* Really cool how it auto generates schemas and database migrations

### Tailwind

* I can't quit this piece of crap library!
* I'm using it as they suggest: completely with `className`s. I'm using no CSS files. It's still not good.

### Local Storage

* All user data, like loved albums, is stored in local storage
* Was inspired by a Remix tweet about how powerful it is
* I have no desire to manage user state on a server, that's for my day job. I want this to be fun and it won't be
  fun if I have to worry about security and availability.

### Github Actions

* To keep the Pitchfork & Bandcamp albums up to date, I setup a Github Actions "cron" job that will update the
  database weekly. No need to touch it to get new data (I hope)

### Playwright

* Had to do a bunch of database scraping. Struggled for a bit with raw HTML and running into walls with
  anti-scraping issues.
* Decided to kick the tires on Playwright and I really like it.
* Cypress = jQuery, Playwright = JS is 2022

[app]: https://album-mode.party
[last.fm]: https://last.fm/user/eli_pwnd
[p4k]: https://pitchfork.com
[chord]: https://chord.co
[remix.run]: https://remix.run/
[spotify-search]: https://developer.spotify.com/documentation/web-api/reference/#/operations/search
[bandcamp.daily]: https://daily.bandcamp.com/album-of-the-day
[every-noise]: https://everynoise.com/
[every-noise.genres]: https://everynoise.com/everynoise1d.cgi?scope=all&vector=popularity
